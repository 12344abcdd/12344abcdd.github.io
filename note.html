<!DOCTYPE html>
<html>
<head>
    <title>GitHub 协作记事本</title>
    <style>
        body { font-family: Arial, max-width: 800px, margin: 0 auto; padding: 20px; }
        #editor { width: 100%; height: 400px; border: 1px solid #ccc; padding: 10px; }
    </style>
</head>
<body>
    <h1>GitHub 协作记事本</h1>
    <textarea id="editor"></textarea>
    <button id="save">保存到 GitHub</button>
    <p id="status"></p>
    
    <script>
        const editor = document.getElementById('editor');
        const saveBtn = document.getElementById('save');
        const status = document.getElementById('status');
        
        // 从 GitHub 获取内容
        async function loadContent() {
            try {
                const response = await fetch('https://api.github.com/repos/abcdd12344/abcdd12344.github.io/contents/shared.txt');
                const data = await response.json();
                editor.value = atob(data.content);
                status.textContent = '内容已加载';
            } catch (error) {
                status.textContent = '无法加载内容';
            }
        }
        
        // 保存内容到 GitHub
        async function saveContent() {
            const content = btoa(editor.value);
            const message = `Update at ${new Date().toISOString()}`;
            
            try {
                const response = await fetch('https://api.github.com/repos/abcdd12344/abcdd12344.github.io/contents/shared.txt', {
                    method: 'PUT',
                    headers: {
                        'Authorization': 'token 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',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        content: content,
                        sha: '' // 第一次可以为空
                    })
                });
                
                status.textContent = '内容已保存';
            } catch (error) {
                status.textContent = '保存失败';
            }
        }
        
        saveBtn.addEventListener('click', saveContent);
        loadContent();
    </script>
</body>
</html>
